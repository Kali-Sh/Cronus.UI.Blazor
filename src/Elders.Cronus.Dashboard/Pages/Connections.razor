@page "/connections"
@inherits ConnectionsBase

<h1>Connections</h1>
<div>
    <NavLink href="connection/new">
        <span class="oi oi-plus"></span> New Connection
    </NavLink>
</div>
<MatTable Items="@connections" LoadInitialData="true" FilterByColumnName="Name" PageSize="9999" ShowPaging="false" Striped="false" AllowSelection="true" class="mat-elevation-z5">
    <MatTableHeader>
        <th style="width:20%">Name</th>
        <th style="width:30%">Endpoint</th>
        <th style="width:30%">Authority</th>
        <th style="width:20%">Actions</th>
    </MatTableHeader>
    <MatTableRow>
        <td>@context.Name</td>
        <td>@context.CronusEndpoint</td>
        <td>@context.oAuth.ServerEndpoint</td>
        <td>
            <MatButton Outlined="true" TrailingIcon="edit" Link="@($"/connection/{@context.Name}")">Edit</MatButton>
            <MatButton Outlined="true" TrailingIcon="delete" OnClick="@(async () => await OnDeleteAsync(context))">Delete</MatButton>
        </td>
    </MatTableRow>
</MatTable>
